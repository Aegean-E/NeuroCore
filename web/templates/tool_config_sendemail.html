<form id="sendemail-config-form" hx-post="/tools/config/SendEmail" hx-target="#config-content" class="space-y-6">
    <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-sm text-slate-400">
        <p>Configure the SMTP server settings for sending emails. These values will be stored as environment variables.</p>
    </div>

    <div>
        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">SMTP Server</label>
        <input type="text" name="smtp_server" value="{{ smtp_server }}" placeholder="e.g., smtp.gmail.com" 
               class="w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-500 outline-none">
    </div>

    <div>
        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">SMTP Port</label>
        <input type="number" name="smtp_port" value="{{ smtp_port }}" placeholder="e.g., 587" 
               class="w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-500 outline-none">
    </div>

    <div>
        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Sender Email Address</label>
        <input type="email" name="smtp_email" value="{{ smtp_email }}" placeholder="e.g., your-email@gmail.com" 
               class="w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-500 outline-none">
    </div>

    <div>
        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Sender Password / App Password</label>
        <input type="password" name="smtp_password" value="{{ smtp_password }}" placeholder="e.g., app-specific password for Gmail" 
               class="w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-500 outline-none">
        <p class="text-xs text-slate-500 mt-2">For Gmail with 2FA enabled, use an App Password instead of your account password.</p>
    </div>

    <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-4 text-xs text-slate-400 space-y-2">
        <p><strong>Note:</strong> These settings are stored as environment variables and used by the SendEmail tool.</p>
        <p>Current values will be shown above if already configured.</p>
    </div>

    <div class="flex space-x-3 pt-4">
        <button type="button" onclick="closeToolConfig()" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded-lg text-sm font-bold transition-colors">
            Cancel
        </button>
        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg text-sm font-bold transition-colors">
            Save Configuration
        </button>
    </div>
</form>

<script>
    document.getElementById('sendemail-config-form').addEventListener('htmx:afterSwap', function(evt) {
        if (evt.detail.successful) {
            setTimeout(() => {
                closeToolConfig();
            }, 500);
        }
    });
</script>
